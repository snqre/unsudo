use super::*;

#[inline]
pub fn pi<const A: u8, B>() -> B 
where 
    B: int::Int {
    if B::IS_SIGNED {
        let pi: i128 = signed_pi::<A>();
        let pi: B = unsafe {
            pi.try_into().unwrap_unchecked()
        };
        return pi
    }
    let pi: u128 = unsigned_pi::<A>();
    let pi: B = unsafe {
        pi.try_into().unwrap_unchecked()
    };
    pi
}

#[inline]
const fn signed_pi<const T: u8>() -> i128 {
    assert!(T != 0);
    assert!(T <= 37);
    match T {
        1 => 31,
        2 => 314,
        3 => 3141,
        4 => 31415,
        5 => 314159,
        6 => 3141592,
        7 => 31415926,
        8 => 314159265,
        9 => 3141592653,
        10 => 31415926535,
        11 => 314159265358,
        12 => 3141592653589,
        13 => 31415926535897,
        14 => 314159265358979,
        15 => 3141592653589793,
        16 => 31415926535897932,
        17 => 314159265358979323,
        18 => 3141592653589793238,
        19 => 31415926535897932384,
        20 => 314159265358979323846,
        21 => 3141592653589793238462,
        22 => 31415926535897932384626,
        23 => 314159265358979323846264,
        24 => 3141592653589793238462643,
        25 => 31415926535897932384626433,
        26 => 314159265358979323846264338,
        27 => 3141592653589793238462643383,
        28 => 31415926535897932384626433832,
        29 => 314159265358979323846264338327,
        30 => 3141592653589793238462643383279,
        31 => 31415926535897932384626433832795,
        32 => 314159265358979323846264338327950,
        33 => 3141592653589793238462643383279502,
        34 => 31415926535897932384626433832795028,
        35 => 314159265358979323846264338327950288,
        36 => 3141592653589793238462643383279502884,
        37 => 31415926535897932384626433832795028841,
        _ => panic!()
    }
}

#[inline]
const fn unsigned_pi<const T: u8>() -> u128 {
    match T {
        1 => 31,
        2 => 314,
        3 => 3141,
        4 => 31415,
        5 => 314159,
        6 => 3141592,
        7 => 31415926,
        8 => 314159265,
        9 => 3141592653,
        10 => 31415926535,
        11 => 314159265358,
        12 => 3141592653589,
        13 => 31415926535897,
        14 => 314159265358979,
        15 => 3141592653589793,
        16 => 31415926535897932,
        17 => 314159265358979323,
        18 => 3141592653589793238,
        19 => 31415926535897932384,
        20 => 314159265358979323846,
        21 => 3141592653589793238462,
        22 => 31415926535897932384626,
        23 => 314159265358979323846264,
        24 => 3141592653589793238462643,
        25 => 31415926535897932384626433,
        26 => 314159265358979323846264338,
        27 => 3141592653589793238462643383,
        28 => 31415926535897932384626433832,
        29 => 314159265358979323846264338327,
        30 => 3141592653589793238462643383279,
        31 => 31415926535897932384626433832795,
        32 => 314159265358979323846264338327950,
        33 => 3141592653589793238462643383279502,
        34 => 31415926535897932384626433832795028,
        35 => 314159265358979323846264338327950288,
        36 => 3141592653589793238462643383279502884,
        37 => 31415926535897932384626433832795028841,
        38 => 314159265358979323846264338327950288419,
        _ => unsafe {
            ::core::hint::unreachable_unchecked()
        }
    }
}